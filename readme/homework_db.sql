-- 创建数据库（如果不存在）
CREATE DATABASE IF NOT EXISTS java_homework CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE java_homework;

-- 创建Users表（用户/学生/教师/管理员）
DROP TABLE IF EXISTS Users;
CREATE TABLE Users (
                       id INT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',
                       username VARCHAR(20) NOT NULL UNIQUE COMMENT '登录用户名',
                       password VARCHAR(20) NOT NULL COMMENT '登录密码',
                       role VARCHAR(10) NOT NULL COMMENT '角色：Admin/Teacher/Student',
                       name VARCHAR(20) NOT NULL COMMENT '真实姓名（学生需包含本人姓名）',
                       className VARCHAR(20) COMMENT '班级（仅学生有值）',
                       majorName VARCHAR(20) COMMENT '专业（仅学生有值）',
                       created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
) COMMENT '用户表';

-- 创建Courses表（开课实例）
DROP TABLE IF EXISTS Courses;
CREATE TABLE Courses (
                         id INT PRIMARY KEY AUTO_INCREMENT COMMENT '课程ID',
                         courseName VARCHAR(50) NOT NULL COMMENT '课程名称（必需包含《Java 应用开发》）',
                         credits INT NOT NULL COMMENT '学分',
                         teacherId INT NOT NULL COMMENT '任课教师ID（关联Users表）',
                         className VARCHAR(20) NOT NULL COMMENT '授课班级',
                         semester VARCHAR(20) NOT NULL COMMENT '开课学期（如2025-2026-1）',
                         classSize INT NOT NULL COMMENT '班级人数',
                         FOREIGN KEY (teacherId) REFERENCES Users(id)
) COMMENT '课程表（开课实例）';

-- 创建Grades表（成绩）
DROP TABLE IF EXISTS Grades;
CREATE TABLE Grades (
                        id INT PRIMARY KEY AUTO_INCREMENT COMMENT '成绩ID',
                        studentId INT NOT NULL COMMENT '学生ID（关联Users表）',
                        offeringId INT NOT NULL COMMENT '开课实例ID（关联Courses表）',
                        score INT NOT NULL COMMENT '成绩（0-100）',
                        FOREIGN KEY (studentId) REFERENCES Users(id),
                        FOREIGN KEY (offeringId) REFERENCES Courses(id)
) COMMENT '成绩表';

-- 初始化数据：1个Admin、5个Teacher、100个Student（含本人姓名）、10门课程（含《Java 应用开发》）
-- 1. 初始化Admin
INSERT INTO Users (username, password, role, name)
VALUES ('admin', 'admin123', 'Admin', '教务管理员');

-- 2. 初始化5个Teacher
INSERT INTO Users (username, password, role, name)
VALUES
    ('teacher1', 'tea123', 'Teacher', '张老师'),
    ('teacher2', 'tea123', 'Teacher', '李老师'),
    ('teacher3', 'tea123', 'Teacher', '王老师'),
    ('teacher4', 'tea123', 'Teacher', '刘老师'),
    ('teacher5', 'tea123', 'Teacher', '陈老师');

-- 3. 初始化100个Student（含本人姓名，示例：本人姓名=张三）
INSERT INTO Users (username, password, role, name, className, majorName)
VALUES
    ('2410160121', 'stu123', 'Student', '马如君', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160101', 'stu123', 'Student', '赵一', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160102', 'stu123', 'Student', '钱二', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160103', 'stu123', 'Student', '孙三', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160104', 'stu123', 'Student', '李四', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160105', 'stu123', 'Student', '周五', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160106', 'stu123', 'Student', '吴六', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160107', 'stu123', 'Student', '郑七', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160108', 'stu123', 'Student', '王八', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160109', 'stu123', 'Student', '冯九', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160110', 'stu123', 'Student', '陈十', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160111', 'stu123', 'Student', '褚十一', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160112', 'stu123', 'Student', '卫十二', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160113', 'stu123', 'Student', '蒋十三', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160114', 'stu123', 'Student', '沈十四', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160115', 'stu123', 'Student', '韩十五', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160116', 'stu123', 'Student', '杨十六', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160117', 'stu123', 'Student', '朱十七', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160118', 'stu123', 'Student', '秦十八', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160119', 'stu123', 'Student', '尤十九', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160120', 'stu123', 'Student', '许二十', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160125', 'stu123', 'Student', '何二一', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160122', 'stu123', 'Student', '吕二二', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160123', 'stu123', 'Student', '施二三', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160124', 'stu123', 'Student', '张二四', '大数据2024-1班', '数据科学与大数据技术'),
    ('2410160201', 'stu123', 'Student', '孔二五', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160202', 'stu123', 'Student', '曹二六', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160203', 'stu123', 'Student', '严二七', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160204', 'stu123', 'Student', '华二八', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160205', 'stu123', 'Student', '金二九', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160206', 'stu123', 'Student', '魏三十', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160207', 'stu123', 'Student', '陶三一', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160208', 'stu123', 'Student', '姜三二', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160209', 'stu123', 'Student', '戚三三', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160210', 'stu123', 'Student', '谢三四', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160211', 'stu123', 'Student', '邹三五', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160212', 'stu123', 'Student', '喻三六', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160213', 'stu123', 'Student', '柏三七', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160214', 'stu123', 'Student', '水三八', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160215', 'stu123', 'Student', '窦三九', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160216', 'stu123', 'Student', '章四十', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160217', 'stu123', 'Student', '云四一', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160218', 'stu123', 'Student', '苏四二', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160219', 'stu123', 'Student', '潘四三', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160220', 'stu123', 'Student', '葛四四', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160221', 'stu123', 'Student', '奚四五', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160222', 'stu123', 'Student', '范四六', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160223', 'stu123', 'Student', '彭四七', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160224', 'stu123', 'Student', '郎四八', '大数据2024-2班', '数据科学与大数据技术'),
    ('2410160225', 'stu123', 'Student', '鲁四九', '大数据2024-2班', '数据科学与大数据技术'),
    ('2411160101', 'stu123', 'Student', '韦五十', '计算机2024-1班', '计算机科学与技术'),
    ('2411160102', 'stu123', 'Student', '昌五一', '计算机2024-1班', '计算机科学与技术'),
    ('2411160103', 'stu123', 'Student', '马五二', '计算机2024-1班', '计算机科学与技术'),
    ('2411160104', 'stu123', 'Student', '苗五三', '计算机2024-1班', '计算机科学与技术'),
    ('2411160105', 'stu123', 'Student', '凤五四', '计算机2024-1班', '计算机科学与技术'),
    ('2411160106', 'stu123', 'Student', '花五五', '计算机2024-1班', '计算机科学与技术'),
    ('2411160107', 'stu123', 'Student', '方五六', '计算机2024-1班', '计算机科学与技术'),
    ('2411160108', 'stu123', 'Student', '俞五七', '计算机2024-1班', '计算机科学与技术'),
    ('2411160109', 'stu123', 'Student', '任五八', '计算机2024-1班', '计算机科学与技术'),
    ('2411160110', 'stu123', 'Student', '袁五九', '计算机2024-1班', '计算机科学与技术'),
    ('2411160111', 'stu123', 'Student', '柳六十', '计算机2024-1班', '计算机科学与技术'),
    ('2411160112', 'stu123', 'Student', '酆六一', '计算机2024-1班', '计算机科学与技术'),
    ('2411160113', 'stu123', 'Student', '鲍六二', '计算机2024-1班', '计算机科学与技术'),
    ('2411160114', 'stu123', 'Student', '史六三', '计算机2024-1班', '计算机科学与技术'),
    ('2411160115', 'stu123', 'Student', '唐六四', '计算机2024-1班', '计算机科学与技术'),
    ('2411160116', 'stu123', 'Student', '费六五', '计算机2024-1班', '计算机科学与技术'),
    ('2411160117', 'stu123', 'Student', '廉六六', '计算机2024-1班', '计算机科学与技术'),
    ('2411160118', 'stu123', 'Student', '岑六七', '计算机2024-1班', '计算机科学与技术'),
    ('2411160119', 'stu123', 'Student', '薛六八', '计算机2024-1班', '计算机科学与技术'),
    ('2411160120', 'stu123', 'Student', '雷六九', '计算机2024-1班', '计算机科学与技术'),
    ('2411160121', 'stu123', 'Student', '贺七十', '计算机2024-1班', '计算机科学与技术'),
    ('2411160122', 'stu123', 'Student', '倪七一', '计算机2024-1班', '计算机科学与技术'),
    ('2411160123', 'stu123', 'Student', '汤七二', '计算机2024-1班', '计算机科学与技术'),
    ('2411160124', 'stu123', 'Student', '滕七三', '计算机2024-1班', '计算机科学与技术'),
    ('2411160125', 'stu123', 'Student', '殷七四', '计算机2024-1班', '计算机科学与技术'),
    ('2411160201', 'stu123', 'Student', '罗七五', '计算机2024-2班', '计算机科学与技术'),
    ('2411160202', 'stu123', 'Student', '毕七六', '计算机2024-2班', '计算机科学与技术'),
    ('2411160203', 'stu123', 'Student', '郝七七', '计算机2024-2班', '计算机科学与技术'),
    ('2411160204', 'stu123', 'Student', '邬七八', '计算机2024-2班', '计算机科学与技术'),
    ('2411160205', 'stu123', 'Student', '安七九', '计算机2024-2班', '计算机科学与技术'),
    ('2411160206', 'stu123', 'Student', '常八十', '计算机2024-2班', '计算机科学与技术'),
    ('2411160207', 'stu123', 'Student', '乐八一', '计算机2024-2班', '计算机科学与技术'),
    ('2411160208', 'stu123', 'Student', '于八二', '计算机2024-2班', '计算机科学与技术'),
    ('2411160209', 'stu123', 'Student', '时八三', '计算机2024-2班', '计算机科学与技术'),
    ('2411160210', 'stu123', 'Student', '傅八四', '计算机2024-2班', '计算机科学与技术'),
    ('2411160211', 'stu123', 'Student', '皮八五', '计算机2024-2班', '计算机科学与技术'),
    ('2411160212', 'stu123', 'Student', '卞八六', '计算机2024-2班', '计算机科学与技术'),
    ('2411160213', 'stu123', 'Student', '齐八七', '计算机2024-2班', '计算机科学与技术'),
    ('2411160214', 'stu123', 'Student', '康八八', '计算机2024-2班', '计算机科学与技术'),
    ('2411160215', 'stu123', 'Student', '伍八九', '计算机2024-2班', '计算机科学与技术'),
    ('2411160216', 'stu123', 'Student', '余九十', '计算机2024-2班', '计算机科学与技术'),
    ('2411160217', 'stu123', 'Student', '元九一', '计算机2024-2班', '计算机科学与技术'),
    ('2411160218', 'stu123', 'Student', '卜九二', '计算机2024-2班', '计算机科学与技术'),
    ('2411160219', 'stu123', 'Student', '顾九三', '计算机2024-2班', '计算机科学与技术'),
    ('2411160220', 'stu123', 'Student', '孟九四', '计算机2024-2班', '计算机科学与技术'),
    ('2411160221', 'stu123', 'Student', '平九五', '计算机2024-2班', '计算机科学与技术'),
    ('2411160222', 'stu123', 'Student', '黄九六', '计算机2024-2班', '计算机科学与技术'),
    ('2411160223', 'stu123', 'Student', '和九七', '计算机2024-2班', '计算机科学与技术'),
    ('2411160224', 'stu123', 'Student', '穆九八', '计算机2024-2班', '计算机科学与技术'),
    ('2411160225', 'stu123', 'Student', '萧九九', '计算机2024-2班', '计算机科学与技术');

-- 4. 初始化10门课程（含《Java 应用开发》）
INSERT INTO Courses (courseName, credits, teacherId, className, semester, classSize)
VALUES
    ('Java 应用开发', 3, 2, '大数据2401班', '2025-2026-1', 50),
    ('数据库原理', 3, 3, '大数据2401班', '2025-2026-1', 50),
    ('操作系统', 3, 4, '大数据2402班', '2025-2026-1', 50),
    ('计算机网络', 2, 5, '计算机2401班', '2025-2026-1', 50),
    ('数据结构', 3, 6, '计算机2401班', '2025-2026-1', 50),
    ('Python编程', 2, 2, '计算机2402班', '2025-2026-1', 50),
    ('人工智能', 3, 3, '大数据2401班', '2025-2026-1', 50),
    ('Web开发', 2, 4, '大数据2402班', '2025-2026-1', 50),
    ('移动开发', 3, 5, '计算机2401班', '2025-2026-1', 50),
    ('信息安全', 2, 6, '计算机2402班', '2025-2026-1', 50);

-- 初始化成绩（30名学生、5门课程、3个班、3名教师）
INSERT INTO Grades (studentId, offeringId, score)
VALUES
-- 1. 大数据2401班（学生ID 3-12，关联教师ID 2、3，课程ID 1、2、5）
(3, 1, 90), -- 张三 《Java 应用开发》（教师2）
(3, 2, 85), -- 张三 《数据库原理》（教师3）
(4, 1, 82), -- 钱二 《Java 应用开发》
(4, 5, 78), -- 钱二 《数据结构》（教师6，补充覆盖第5门课）
(5, 2, 92), -- 孙三 《数据库原理》
(5, 1, 86), -- 孙三 《Java 应用开发》
(6, 5, 80), -- 李四 《数据结构》
(6, 2, 75), -- 李四 《数据库原理》
(7, 1, 79), -- 周五 《Java 应用开发》
(7, 5, 83), -- 周五 《数据结构》
(8, 2, 88), -- 吴六 《数据库原理》
(8, 1, 91), -- 吴六 《Java 应用开发》
(9, 5, 72), -- 郑七 《数据结构》
(9, 2, 84), -- 郑七 《数据库原理》
(10, 1, 87), -- 王八 《Java 应用开发》
(10, 5, 76), -- 王八 《数据结构》
(11, 2, 93), -- 冯九 《数据库原理》
(11, 1, 81), -- 冯九 《Java 应用开发》
(12, 5, 89), -- 陈十 《数据结构》
(12, 2, 77), -- 陈十 《数据库原理》
-- 2. 大数据2402班（学生ID 26-30，关联教师ID 4，课程ID 3）
(26, 3, 70), -- 孔二五 《操作系统》（教师4）
(27, 3, 85), -- 曹二六 《操作系统》
(28, 3, 68), -- 严二七 《操作系统》
(29, 3, 92), -- 华二八 《操作系统》
(30, 3, 79), -- 金二九 《操作系统》
-- 3. 计算机2401班（学生ID 31-32，关联教师ID 5，课程ID 4）
(31, 4, 83), -- 韦五十 《计算机网络》（教师5）
(32, 4, 75), -- 昌五一 《计算机网络》
-- 补充剩余2组，确保30组完整
(13, 1, 65), -- 褚十一 《Java 应用开发》
(14, 3, 95); -- 卫十二 《操作系统》